<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>League Standings</title>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-analytics.js";
    
 const firebaseConfig = {
apiKey: "",
authDomain: "thcom",
projectId: "th4",
storageBucket: "thcom",
messagingSenderId: "3166",
appId: "1099f",
measurementId: "G-",
};
    
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
    
        // Optionally log an event to test analytics functionality
        // Example: Log an event when the page is loaded
        analytics.logEvent('page_view');
    </script>
    
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        #leagueSelector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        .league-logo {
            width: 60px;
            height: 60px;
            cursor: pointer;
        }
        .loading {
            text-align: center;
            font-size: 18px;
            color: #888;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 10px;
            text-align: center;
        }
        th {
            background-color: #4CAF50;
            color: white;
        }
        .spinner {
            margin-top: 20px;
            text-align: center;
        }
        .spinner div {
            width: 50px;
            height: 50px;
            margin: 0 auto;
            border: 6px solid #f3f3f3;
            border-top: 6px solid #3498db;
            border-radius: 50%;
            animation: spin 2s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

 #leaueSlector {
    display: flex;
    align-items: left; /* Align items vertically */
    gap: 10px; /* Space between logo and text */
    justify-content: left; /* Center content */
    margin-bottom: 10px;
}

#leaueSlector img {
    height: 30px; /* Smaller size for images */
    width: auto;
}

.leaue-logo {
    height: 40px;
    width: 40px;
    cursor: pointer;
    transition: transform 0.2s;
}

.leaue-logo:hover {
    transform: scale(1.1); /* Slight zoom effect on hover */
}
.back-button {
    position: fixed;
    top: 20px;
    right: 20px;
    display: flex;
    align-items: center;
    gap: 6px;
    background: #1e1e2e;
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
    text-decoration: none;
    transition: background 0.3s ease;
}

.back-button:hover {
    background: #3a3a5e;
}

.back-button i {
    font-size: 16px;
}

body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f9;
    padding: 20px;
    margin: 0;
}

h1 {
    text-align: center;
    color: #333;
}

/* League Selector */
#leagueSelector {
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
    margin-bottom: 30px;
}

.league-logo {
    width: 60px;
    height: 60px;
    cursor: pointer;
    transition: transform 0.2s;
}

.league-logo:hover {
    transform: scale(1.1);
}

/* Loading Animation */
.loading {
    text-align: center;
    font-size: 18px;
    color: #888;
}

/* Table Styling */
.table-container {
    width: 100%;
    overflow-x: auto; /* Makes table scrollable on small screens */
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

table, th, td {
    border: 1px solid #ddd;
}

th, td {
    padding: 10px;
    text-align: center;
}

th {
    background-color: #4CAF50;
    color: white;
}

/* Spinner Animation */
.spinner {
    margin-top: 20px;
    text-align: center;
}

.spinner div {
    width: 50px;
    height: 50px;
    margin: 0 auto;
    border: 6px solid #f3f3f3;
    border-top: 6px solid #3498db;
    border-radius: 50%;
    animation: spin 2s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Back Button */
.back-button {
    position: fixed;
    top: 20px;
    right: 20px;
    display: flex;
    align-items: center;
    gap: 6px;
    background: #1e1e2e;
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
    text-decoration: none;
    transition: background 0.3s ease;
}

.back-button:hover {
    background: #3a3a5e;
}

.back-button i {
    font-size: 16px;
}

/* Responsive Design */
@media (max-width: 768px) {
    .table-container {
        overflow-x: auto;
    }

    th, td {
        padding: 8px;
        font-size: 14px;
    }

    .league-logo {
        width: 50px;
        height: 50px;
    }

    .back-button {
        font-size: 12px;
        padding: 6px 10px;
    }
}

    </style>
</head>
<body>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <a href="index.html" class="back-button">
        <i class="fa fa-arrow-left"></i> Back
    </a>

        <div id="leaueSlector">
        <img src="/images/logo.png" alt="CubeSports Logo" class="h-8 w-8 md:h-10 md:w-10">
    </div>

    <h1>League Standings</h1>
    
    <div id="leagueSelector">
        <img src="pl.png" class="league-logo" alt="Premier League" onclick="changeLeague('eng.1')">
        <img src="laliga.png" class="league-logo" alt="La Liga" onclick="changeLeague('esp.1')">
        <img src="bundes.png" class="league-logo" alt="Bundesliga" onclick="changeLeague('ger.1')">
        <img src="seriea.png" class="league-logo" alt="Serie A" onclick="changeLeague('ita.1')">
        <img src="ligue1.png" class="league-logo" alt="Ligue 1" onclick="changeLeague('fra.1')">
    </div>

    <div id="loading" class="loading">Loading...</div>
    <div class="spinner" id="spinner" style="display: none;">
        <div></div>
    </div>

    <table id="standingsTable" class="w-full mt-[32px]">
        <thead>
            <tr>
                <th class="w-[50%]" align="left">Club</th>
                <th align="center">P</th>
                <th align="center">W</th>
                <th align="center">D</th>
                <th align="center">L</th>
                <th align="center">F</th>
                <th align="center">A</th>
                <th align="center">GD</th>
                <th align="center" class="hidden vsm:block">PTS</th>
            </tr>
        </thead>
        <tbody>
            <!-- Standings rows will be populated here -->
        </tbody>
    </table>

  <script>
    const leagues = [
        { name: "Premier League", logo: "pl.png", slug: "eng.1" },
        { name: "La Liga", logo: "laliga.png", slug: "esp.1" },
        { name: "Bundesliga", logo: "bundes.png", slug: "ger.1" },
        { name: "Serie A", logo: "seriea.png", slug: "ita.1" },
        { name: "Ligue 1", logo: "ligue1.png", slug: "fra.1" }
    ];

    // Function to construct the API URL for standings
    const constructApiUrl = (leagueSlug) => {
        return `https://site.api.espn.com/apis/v2/sports/soccer/${leagueSlug}/standings`;
    };

    // Fetch standings from the API
    const fetchStandings = async (leagueSlug) => {
        const url = constructApiUrl(leagueSlug);
        document.getElementById('spinner').style.display = 'block';  // Show spinner
        try {
            const response = await fetch(url);
            const data = await response.json();
            return data.children[0].standings.entries || [];  // Return standings entries
        } catch (error) {
            console.error('Error fetching standings:', error);
            return [];
        }
    };

    // Render standings to the table
    const renderStandings = (standings) => {
        const tableBody = document.querySelector("#standingsTable tbody");
        tableBody.innerHTML = '';  // Clear previous rows

        standings.forEach((entry) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${entry.team.displayName}</td> <!-- Club Name -->
                <td align="center">${entry.stats[0].value}</td> <!-- P (Played) -->
                <td align="center">${entry.stats[7].value}</td> <!-- W (Wins) -->
                <td align="center">${entry.stats[6].value}</td> <!-- D (Draws) -->
                <td align="center">${entry.stats[1].value}</td> <!-- L (Losses) -->
                <td align="center">${entry.stats[5].value}</td> <!-- F (Goals For) -->
                <td align="center">${entry.stats[4].value}</td> <!-- A (Goals Against) -->
                <td align="center">${entry.stats[2].value}</td> <!-- GD (Goal Difference) -->
                <td align="center">${entry.stats[3].value}</td> <!-- PTS (Points) -->
            `;
            tableBody.appendChild(row);
        });

        document.getElementById('loading').style.display = 'none'; // Hide loading text
        document.getElementById('spinner').style.display = 'none'; // Hide spinner
        document.getElementById('standingsTable').style.display = 'table'; // Show the table
    };

    // Handle league change on image click
    const changeLeague = (leagueSlug) => {
        document.getElementById('loading').style.display = 'block';  // Show loading
        document.getElementById('standingsTable').style.display = 'none'; // Hide table
        document.getElementById('spinner').style.display = 'block';  // Show spinner

        fetchStandings(leagueSlug).then(standings => {
            renderStandings(standings);
        });
    };

    // Initialize with the first league (Premier League as default)
    changeLeague('eng.1');
</script>
<script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-messaging.js"></script>
<script src="firebase-messaging-sw.js"></script>
<script src="firebase.js"></script>


</body>
</html>
